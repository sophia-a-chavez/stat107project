<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>main</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="main_files/libs/clipboard/clipboard.min.js"></script>
<script src="main_files/libs/quarto-html/quarto.js"></script>
<script src="main_files/libs/quarto-html/popper.min.js"></script>
<script src="main_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="main_files/libs/quarto-html/anchor.min.js"></script>
<link href="main_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="main_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="main_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="main_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="main_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">main</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="leo-guzman---attempt-1" class="level2">
<h2 class="anchored" data-anchor-id="leo-guzman---attempt-1">Leo Guzman - attempt 1</h2>
<p>My plan is to find the average amount of shootings per year by race</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"FatalPoliceShootings_US.csv"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">class</span>(FatalShootingsStats))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(FatalShootingsStats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id               name     date  manner_of_death      armed          armed_agg
1  3         Tim Elliot 1/2/2015             shot        gun                Gun
2  4   Lewis Lee Lembke 1/2/2015             shot        gun                Gun
3  5 John Paul Quintero 1/3/2015 shot and Tasered    unarmed            Unarmed
4  8    Matthew Hoffman 1/4/2015             shot toy weapon Toy Weapon, BB Gun
5  9  Michael Rodriguez 1/4/2015             shot   nail gun Toy Weapon, BB Gun
6 11  Kenneth Joe Brown 1/4/2015             shot        gun                Gun
  age gender race race_name          city state signs_of_mental_illness
1  53      M    A     Asian       Shelton    WA                    TRUE
2  47      M    W     White         Aloha    OR                   FALSE
3  23      M    H  Hispanic       Wichita    KS                   FALSE
4  32      M    W     White San Francisco    CA                    TRUE
5  39      M    H  Hispanic         Evans    CO                   FALSE
6  18      M    W     White       Guthrie    OK                   FALSE
  threat_level        flee body_camera longitude latitude is_geocoding_exact
1      Extreme Not fleeing       FALSE  -123.122   47.247               TRUE
2      Extreme Not fleeing       FALSE  -122.892   45.487               TRUE
3  Significant Not fleeing       FALSE   -97.281   37.695               TRUE
4      Extreme Not fleeing       FALSE  -122.422   37.763               TRUE
5      Extreme Not fleeing       FALSE  -104.692   40.384               TRUE
6      Extreme Not fleeing       FALSE   -97.423   35.877               TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Convert the `date` column to Date format so can extract the year</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(FatalShootingsStats<span class="sc">$</span>date, <span class="at">format =</span> <span class="st">"%m/%d/%Y"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Made new column for year as an int</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(FatalShootingsStats<span class="sc">$</span>date, <span class="st">"%Y"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Analyze 2015 as a test run</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>data_filtered <span class="ot">&lt;-</span> FatalShootingsStats[FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2015</span>, ]</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Grab the total amount of times certain races are in the data</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>asian_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Asian'</span>, ])</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>black_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Black'</span>, ])</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>white_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'White'</span>, ])</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>hispanic_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Hispanic'</span>, ])</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>native_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Native American'</span>, ])</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>other_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Other'</span>, ])</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>unknown_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_filtered[data_filtered<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Unknown'</span>, ])</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Created a data.frame with counts so can plot them</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>race_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">race =</span> <span class="fu">c</span>(<span class="st">"White"</span>, <span class="st">"Black"</span>, <span class="st">"Hispanic"</span>, <span class="st">"Asian"</span>, <span class="st">"Native"</span>, <span class="st">"Other"</span>, <span class="st">"Unknown"</span>),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="fu">c</span>(white_count, black_count, hispanic_count, asian_count, native_count, other_count, unknown_count)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co">#Created a pie chart</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="fu">pie</span>(race_counts<span class="sc">$</span>count, </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> race_counts<span class="sc">$</span>race, </span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">main =</span> <span class="st">"Proportion of Different Races in Fatal Shootings in 2015"</span>,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> <span class="fu">rainbow</span>(<span class="fu">length</span>(race_counts<span class="sc">$</span>count)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Sophia's addition </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#creating subsets by year</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(FatalShootingsStats) <span class="co"># getting rid of rows with any NA values</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># basic stats dependent on year</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>data_15 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2015</span> )</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>data_16 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2016</span> )</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>data_17 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2017</span> )</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>data_18 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2018</span> )</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>data_19 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2019</span> )</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>data_20 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2020</span> )</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>data_21 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2021</span> )</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>data_22 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2022</span> )</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>total <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">nrow</span>(data_15), <span class="fu">nrow</span>(data_16), <span class="fu">nrow</span>(data_17), <span class="fu">nrow</span>(data_18), <span class="fu">nrow</span>(data_19), <span class="fu">nrow</span>(data_20), <span class="fu">nrow</span>(data_21), <span class="fu">nrow</span>(data_22) )</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>average_age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">mean</span>(data_15<span class="sc">$</span>age), <span class="fu">mean</span>(data_16<span class="sc">$</span>age), <span class="fu">mean</span>(data_17<span class="sc">$</span>age), <span class="fu">mean</span>(data_18<span class="sc">$</span>age), <span class="fu">mean</span>(data_19<span class="sc">$</span>age), <span class="fu">mean</span>(data_20<span class="sc">$</span>age), <span class="fu">mean</span>(data_21<span class="sc">$</span>age), <span class="fu">mean</span>(data_22<span class="sc">$</span>age))</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>bodycam_false <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">sum</span>(data_15<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_16<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_17<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_18<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_19<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_20<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_21<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>), <span class="fu">sum</span>(data_22<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"FALSE"</span>))</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>bodycam_true <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">sum</span>(data_15<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_16<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_17<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_18<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_19<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_20<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_21<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>), <span class="fu">sum</span>(data_22<span class="sc">$</span>body_camera <span class="sc">==</span> <span class="st">"TRUE"</span>))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>bodycam_percent <span class="ot">&lt;-</span> <span class="fu">c</span>((bodycam_true[<span class="dv">1</span>]<span class="sc">/</span>total[<span class="dv">1</span>]), (bodycam_true[<span class="dv">2</span>]<span class="sc">/</span>total[<span class="dv">2</span>]),(bodycam_true[<span class="dv">3</span>]<span class="sc">/</span>total[<span class="dv">3</span>]),(bodycam_true[<span class="dv">4</span>]<span class="sc">/</span>total[<span class="dv">4</span>]),(bodycam_true[<span class="dv">5</span>]<span class="sc">/</span>total[<span class="dv">5</span>]),(bodycam_true[<span class="dv">6</span>]<span class="sc">/</span>total[<span class="dv">6</span>]),(bodycam_true[<span class="dv">7</span>]<span class="sc">/</span>total[<span class="dv">7</span>]),(bodycam_true[<span class="dv">8</span>]<span class="sc">/</span>total[<span class="dv">7</span>]))</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="do">### adding percent of shootings with armed </span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>gun_armedp <span class="ot">&lt;-</span> <span class="fu">c</span>((<span class="fu">sum</span>(data_15<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">1</span>]), (<span class="fu">sum</span>(data_16<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">2</span>]), (<span class="fu">sum</span>(data_17<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">3</span>]), (<span class="fu">sum</span>(data_18<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">4</span>]), (<span class="fu">sum</span>(data_19<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">5</span>]), (<span class="fu">sum</span>(data_20<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">6</span>]), (<span class="fu">sum</span>(data_21<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]), (<span class="fu">sum</span>(data_22<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"gun"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]))</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>unarmed_armedp <span class="ot">&lt;-</span> <span class="fu">c</span>((<span class="fu">sum</span>(data_15<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">1</span>]), (<span class="fu">sum</span>(data_16<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">2</span>]), (<span class="fu">sum</span>(data_17<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">3</span>]), (<span class="fu">sum</span>(data_18<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">4</span>]), (<span class="fu">sum</span>(data_19<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">5</span>]), (<span class="fu">sum</span>(data_20<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">6</span>]), (<span class="fu">sum</span>(data_21<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]), (<span class="fu">sum</span>(data_22<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"unarmed"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]))</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>car_armedp <span class="ot">&lt;-</span> <span class="fu">c</span>((<span class="fu">sum</span>(data_15<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">1</span>]), (<span class="fu">sum</span>(data_16<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">2</span>]), (<span class="fu">sum</span>(data_17<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">3</span>]), (<span class="fu">sum</span>(data_18<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">4</span>]), (<span class="fu">sum</span>(data_19<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">5</span>]), (<span class="fu">sum</span>(data_20<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">6</span>]), (<span class="fu">sum</span>(data_21<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]), (<span class="fu">sum</span>(data_22<span class="sc">$</span>armed <span class="sc">==</span> <span class="st">"Vehicle"</span>) <span class="sc">/</span> total[<span class="dv">7</span>]))</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>mental_illness <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">sum</span>(data_15<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">1</span>], <span class="fu">sum</span>(data_16<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">2</span>], <span class="fu">sum</span>(data_17<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">3</span>], <span class="fu">sum</span>(data_18<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">4</span>], <span class="fu">sum</span>(data_19<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">5</span>], <span class="fu">sum</span>(data_20<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">6</span>], <span class="fu">sum</span>(data_21<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">7</span>], <span class="fu">sum</span>(data_22<span class="sc">$</span>signs_of_mental_illness <span class="sc">==</span> <span class="st">"TRUE"</span>)<span class="sc">/</span>total[<span class="dv">8</span>])</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>year_stats <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(total, <span class="fu">round</span>(average_age, <span class="dv">1</span>), bodycam_false, bodycam_true, bodycam_percent, gun_armedp, unarmed_armedp, car_armedp, mental_illness) </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(year_stats) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Total Fatal Shootings"</span>, <span class="st">"Average Age"</span>, <span class="st">"No Body Camera"</span>, <span class="st">"Yes Body Camera"</span>, <span class="st">"percent of officers with  body camera"</span>, <span class="st">"percent of victims armed with gun"</span>, <span class="st">"percent of victims unarmed"</span>, <span class="st">"percent of victims armed with vehicle"</span>, <span class="st">"percent of victims with mental illness"</span>)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(year_stats) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"2015"</span>, <span class="st">"2016"</span>, <span class="st">"2017"</span>, <span class="st">"2018"</span>, <span class="st">"2019"</span>, <span class="st">"2020"</span>, <span class="st">"2021"</span>, <span class="st">"2022"</span>)</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>year_stats</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Total Fatal Shootings Average Age No Body Camera Yes Body Camera
2015                   986        36.7            911              75
2016                   904        36.6            767             137
2017                   913        36.6            808             105
2018                   866        37.5            757             109
2019                   880        38.1            759             121
2020                   879        37.3            719             160
2021                   692        37.0            536             156
2022                   280        37.7            225              55
     percent of officers with  body camera percent of victims armed with gun
2015                            0.07606491                         0.5618661
2016                            0.15154867                         0.5320796
2017                            0.11500548                         0.5772180
2018                            0.12586605                         0.5438799
2019                            0.13750000                         0.5761364
2020                            0.18202503                         0.6211604
2021                            0.22543353                         0.6141618
2022                            0.07947977                         0.2225434
     percent of victims unarmed percent of victims armed with vehicle
2015                 0.09533469                           0.004056795
2016                 0.06747788                           0.011061947
2017                 0.07557503                           0.006571742
2018                 0.06351039                           0.056581986
2019                 0.05681818                           0.057954545
2020                 0.06029579                           0.053469852
2021                 0.03034682                           0.036127168
2022                 0.01156069                           0.011560694
     percent of victims with mental illness
2015                              0.2626775
2016                              0.2654867
2017                              0.2486309
2018                              0.2205543
2019                              0.2272727
2020                              0.2093288
2021                              0.1531792
2022                              0.1107143</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adding colunm for current president -&gt; is not currently working,  </span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>month <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(FatalShootingsStats<span class="sc">$</span>date, <span class="st">"%m"</span>))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(FatalShootingsStats<span class="sc">$</span>date, <span class="st">"%d"</span>))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="fu">ifelse</span>(FatalShootingsStats<span class="sc">$</span>month <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> FatalShootingsStats<span class="sc">$</span>day <span class="sc">&gt;=</span><span class="dv">20</span> <span class="sc">&amp;</span> FatalShootingsStats<span class="sc">$</span>year <span class="sc">&gt;=</span><span class="dv">2021</span>, FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="st">"Joseph R. Biden"</span>, FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="st">"Donald Trump"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="fu">ifelse</span>((FatalShootingsStats<span class="sc">$</span>month <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> FatalShootingsStats<span class="sc">$</span>day <span class="sc">&gt;=</span><span class="dv">20</span> <span class="sc">&amp;</span> FatalShootingsStats<span class="sc">$</span>year <span class="sc">&lt;=</span><span class="dv">2016</span>), FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="st">"Barack Obama"</span>, FatalShootingsStats<span class="sc">$</span>President <span class="ot">&lt;-</span><span class="st">"Donald Trump"</span>)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>data_18 <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>year <span class="sc">&gt;=</span> <span class="dv">2015</span> )</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_18)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id               name       date  manner_of_death      armed
1  3         Tim Elliot 2015-01-02             shot        gun
2  4   Lewis Lee Lembke 2015-01-02             shot        gun
3  5 John Paul Quintero 2015-01-03 shot and Tasered    unarmed
4  8    Matthew Hoffman 2015-01-04             shot toy weapon
5  9  Michael Rodriguez 2015-01-04             shot   nail gun
6 11  Kenneth Joe Brown 2015-01-04             shot        gun
           armed_agg age gender race race_name          city state
1                Gun  53      M    A     Asian       Shelton    WA
2                Gun  47      M    W     White         Aloha    OR
3            Unarmed  23      M    H  Hispanic       Wichita    KS
4 Toy Weapon, BB Gun  32      M    W     White San Francisco    CA
5 Toy Weapon, BB Gun  39      M    H  Hispanic         Evans    CO
6                Gun  18      M    W     White       Guthrie    OK
  signs_of_mental_illness threat_level        flee body_camera longitude
1                    TRUE      Extreme Not fleeing       FALSE  -123.122
2                   FALSE      Extreme Not fleeing       FALSE  -122.892
3                   FALSE  Significant Not fleeing       FALSE   -97.281
4                    TRUE      Extreme Not fleeing       FALSE  -122.422
5                   FALSE      Extreme Not fleeing       FALSE  -104.692
6                   FALSE      Extreme Not fleeing       FALSE   -97.423
  latitude is_geocoding_exact year month day    President
1   47.247               TRUE 2015     1   2 Donald Trump
2   45.487               TRUE 2015     1   2 Donald Trump
3   37.695               TRUE 2015     1   3 Donald Trump
4   37.763               TRUE 2015     1   4 Donald Trump
5   40.384               TRUE 2015     1   4 Donald Trump
6   35.877               TRUE 2015     1   4 Donald Trump</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aggregate data by year and race_name</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>race_year_counts <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(FatalShootingsStats<span class="sc">$</span>race_name, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by =</span> <span class="fu">list</span>(<span class="at">Year =</span> FatalShootingsStats<span class="sc">$</span>year, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">Race =</span> FatalShootingsStats<span class="sc">$</span>race_name), </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">FUN =</span> length)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename the count column for clarity</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(race_year_counts)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"Count"</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a matrix to store counts for each race across years</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>race_counts_matrix <span class="ot">&lt;-</span> <span class="fu">xtabs</span>(Count <span class="sc">~</span> Race <span class="sc">+</span> Year, <span class="at">data =</span> race_year_counts)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up colors for each race</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"lightblue"</span>, <span class="st">"lightgreen"</span>, <span class="st">"lightcoral"</span>, <span class="st">"lightpink"</span>, <span class="st">"wheat"</span>, <span class="st">"lavender"</span>, <span class="st">"gray"</span>)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(race_counts_matrix, <span class="at">beside =</span> <span class="cn">TRUE</span>, <span class="at">col =</span> colors,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Fatal Shootings by Race and Year"</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">"Year"</span>, <span class="at">ylab =</span> <span class="st">"Number of Fatal Shootings"</span>, </span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">rownames</span>(race_counts_matrix), </span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">args.legend =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="st">"topright"</span>, <span class="at">inset =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.05</span>, <span class="dv">0</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up an empty plot with the correct axes limits</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="cn">NULL</span>, <span class="at">xlim =</span> <span class="fu">range</span>(race_year_counts<span class="sc">$</span>Year), </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylim =</span> <span class="fu">range</span>(race_year_counts<span class="sc">$</span>Count), </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Year"</span>, <span class="at">ylab =</span> <span class="st">"Number of Fatal Shootings"</span>, </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Fatal Shootings by Race Over the Years"</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define colors for each race</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>race_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>, <span class="st">"purple"</span>, <span class="st">"orange"</span>, <span class="st">"pink"</span>, <span class="st">"gray"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get unique races</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>unique_races <span class="ot">&lt;-</span> <span class="fu">unique</span>(race_year_counts<span class="sc">$</span>Race)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each race to plot its line on the graph</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(unique_races)) {</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset data for the current race</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  race_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(race_year_counts, Race <span class="sc">==</span> unique_races[i])</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot the line for this race</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lines</span>(race_data<span class="sc">$</span>Year, race_data<span class="sc">$</span>Count, <span class="at">type =</span> <span class="st">"o"</span>, <span class="at">col =</span> race_colors[i], <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a legend</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topright"</span>, <span class="at">legend =</span> unique_races, <span class="at">col =</span> race_colors, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">lty =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">##adding map visual, needs work</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>asian_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Asian'</span> )</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>black_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Black'</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>white_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'White'</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>hispanic_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Hispanic'</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>native_count <span class="ot">&lt;-</span><span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span><span class="st">'Native American'</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>other_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Other'</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>unknown_count <span class="ot">&lt;-</span> <span class="fu">subset</span>(FatalShootingsStats, FatalShootingsStats<span class="sc">$</span>race_name <span class="sc">==</span> <span class="st">'Unknown'</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">"state"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(asian_count<span class="sc">$</span>longitude, asian_count<span class="sc">$</span>latitude,</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"deeppink"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(black_count<span class="sc">$</span>longitude, black_count<span class="sc">$</span>latitude,</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"yellow"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(white_count<span class="sc">$</span>longitude, white_count<span class="sc">$</span>latitude,</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(hispanic_count<span class="sc">$</span>longitude, hispanic_count<span class="sc">$</span>latitude,</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"purple"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(native_count<span class="sc">$</span>longitude, native_count<span class="sc">$</span>latitude,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(other_count<span class="sc">$</span>longitude, other_count<span class="sc">$</span>latitude,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"black"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(unknown_count<span class="sc">$</span>longitude, unknown_count<span class="sc">$</span>latitude,</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">col =</span> <span class="st">"orange"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(FatalShootingsStats<span class="sc">$</span>age))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create AgeRange dynamically</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>AgeRange <span class="ot">&lt;-</span> <span class="fu">cut</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  FatalShootingsStats<span class="sc">$</span>age,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">18</span>, <span class="dv">35</span>, <span class="cn">Inf</span>), <span class="co"># Define age range intervals</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0-18"</span>, <span class="st">"19-35"</span>, <span class="st">"36+"</span>),</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">right =</span> <span class="cn">FALSE</span> <span class="co"># Makes intervals inclusive on the left</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize data to count individuals by Race and AgeRange</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> FatalShootingsStats <span class="sc">%&gt;%</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(race, AgeRange) <span class="sc">%&gt;%</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the bar plot</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(FatalShootingsStats, <span class="fu">aes</span>(<span class="at">x =</span> race_name, <span class="at">y =</span> age, <span class="at">fill =</span> AgeRange)) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> <span class="co"># Position bars side by side</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Bar Plot of Races by Age Range"</span>,</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Race"</span>,</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set2"</span>) <span class="sc">+</span> <span class="co"># Optional color palette</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="co"># Clean theme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>On May 25, 2020, George Floyd, a Black man living in Minneapolis, Minnesota was brutally killed by a Minneapolis police officer. This sparked a new peak in the Black Lives Matter (BLM) movement, where there was a new wave of both peaceful protests and riots. The peak of the BLM riots, vandalism, arson and looting occurred from May 26th to June 8th in 2020. During these 2 weeks, were fatal shootings higher than normal?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'Date' column to Date type if it isn't already</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>FatalShootingsStats<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(FatalShootingsStats<span class="sc">$</span>date, <span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)  <span class="co"># Adjust format if needed</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify the two specific dates you want to check</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>date1 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-05-26"</span>)  <span class="co"># Example date 1</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>date2 <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2020-06-08"</span>)  <span class="co"># Example date 2</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for those two dates and count the total number of shootings</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>shootings_period <span class="ot">&lt;-</span> FatalShootingsStats <span class="sc">%&gt;%</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> date1 <span class="sc">&amp;</span> date <span class="sc">&lt;=</span> date2)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of unique days in the time period</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>unique_days_period <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">seq.Date</span>(date1, date2, <span class="at">by =</span> <span class="st">"day"</span>))</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of shootings in the time period</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>total_shootings_period <span class="ot">&lt;-</span> <span class="fu">nrow</span>(shootings_period)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Average shootings per day for the time period (including all days in the range)</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>avg_shootings_per_day_period <span class="ot">&lt;-</span> total_shootings_period <span class="sc">/</span> unique_days_period</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Calculate the average number of shootings per day for the entire dataset</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the first and last dates in the dataset</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>first_date <span class="ot">&lt;-</span> <span class="fu">min</span>(FatalShootingsStats<span class="sc">$</span>date)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>last_date <span class="ot">&lt;-</span> <span class="fu">max</span>(FatalShootingsStats<span class="sc">$</span>date)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of unique days in the entire dataset (including all days between the first and last date)</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>unique_days_total <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">seq.Date</span>(first_date, last_date, <span class="at">by =</span> <span class="st">"day"</span>))</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Total number of shootings in the entire dataset</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>total_shootings_total <span class="ot">&lt;-</span> <span class="fu">nrow</span>(FatalShootingsStats)</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Average shootings per day for the entire dataset (including all days in the range)</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>avg_shootings_per_day_total <span class="ot">&lt;-</span> total_shootings_total <span class="sc">/</span> unique_days_total</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the results</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average shootings per day for the period from May 26, 2020 to June 8, 2020 :"</span>, avg_shootings_per_day_period, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average shootings per day for the period from May 26, 2020 to June 8, 2020 : 3 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Average shootings per day for the entire dataset:"</span>, avg_shootings_per_day_total, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Average shootings per day for the entire dataset: 2.350349 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector with the two averages</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>average_shootings <span class="ot">&lt;-</span> <span class="fu">c</span>(avg_shootings_per_day_period, avg_shootings_per_day_total)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar plot</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(average_shootings, </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">names.arg =</span> <span class="fu">c</span>(<span class="st">"peak BLM riots"</span>, <span class="st">"Entire Dataset"</span>), </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">"Comparison of Average Shootings per Day"</span>, </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">"Average Shootings per Day"</span>, </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"lightblue"</span>, <span class="st">"lightgreen"</span>), </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">border =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>state_to_highlight <span class="ot">&lt;-</span> <span class="st">"Minnesota"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Map Plot</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">"state"</span>, <span class="at">col =</span> <span class="st">"lightgray"</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">bg =</span> <span class="st">"white"</span>, <span class="at">lwd =</span> <span class="fl">0.2</span>)  <span class="co"># Draw USA map</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="st">"state"</span>, <span class="at">region =</span> state_to_highlight, <span class="at">col =</span> <span class="st">"lightblue"</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlay points for Los Angeles and Miami</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Coordinates for Los Angeles</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(<span class="sc">-</span><span class="fl">118.2437</span>, <span class="fl">34.0522</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">cex =</span> <span class="dv">2</span>)  <span class="co"># Los Angeles</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Optionally, add text labels for the cities</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="sc">-</span><span class="fl">118.2437</span>, <span class="fl">34.0522</span>, <span class="st">"Los Angeles"</span>, <span class="at">pos =</span> <span class="dv">3</span>, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">cex =</span> <span class="dv">1</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Overlay points (longitude, latitude) on the map</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(shootings_period<span class="sc">$</span>longitude, shootings_period<span class="sc">$</span>latitude, <span class="at">col =</span> <span class="st">"red"</span>, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="fl">1.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="main_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As we can see, the average number of fatal shootings a day were slightly greater during the peak of the riots, vandalism, arson and looting after George Floyd’s death. Surprisingly, none of the deaths occurred in Minneapolis, which was a hot spot for said BLM riots, but Los Angeles, which was also a hot spot, is shown to have a few deaths in it’s area. So, while the average number of fatal shooting during the peak of the BLM riots period doesn’t seem that much larger than the average number of fatal shootings in the entire data set, it doesn’t tell the entire picture. If the average number of fatal shootings during the seven and a half years the data set encapsulates was the same as the average during the peak of the BLM riots, there would be an increase of 1,769 fatal shootings or 236 fatal shootings a year.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>